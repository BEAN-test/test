<!DOCTYPE html>
<html lang="zh-TW">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
<title>TWICE 2026 Guide</title>

<link rel="apple-touch-icon" href="https://i.imgur.com/W7v5p5E.png">
<link rel="icon" href="https://i.imgur.com/W7v5p5E.png">
<meta name="apple-mobile-web-app-capable" content="yes">
<meta name="apple-mobile-web-app-status-bar-style" content="default">
<meta name="apple-mobile-web-app-title" content="TWICE2026">

<style>
  :root { --primary: #F04E98; --bg: #fdfbfb; --card-bg: #ffffff; --text: #333; --grad: linear-gradient(135deg, #FFAD60, #F04E98); }
  body { font-family: -apple-system, sans-serif; margin:0; background: var(--bg); color: var(--text); padding-bottom: 120px; }
  header { background: var(--grad); color:white; text-align:center; padding:18px; font-weight:bold; position:sticky; top:0; z-index:1000; box-shadow: 0 2px 10px rgba(0,0,0,0.1); transition: 0.3s; }
  
  /* æˆå“¡æ‡‰æ´è‰²èª¿è‰²ç›¤ */
  .member-palette { display: flex; overflow-x: auto; padding: 15px; gap: 12px; background: #fff; border-bottom: 1px solid #eee; }
  .member-dot { width: 32px; height: 32px; border-radius: 50%; border: 2px solid #f0f0f0; flex-shrink: 0; cursor: pointer; box-shadow: 0 2px 4px rgba(0,0,0,0.05); }

  #countdown { background:#222; color:#FFAD60; font-size:1em; padding:8px; text-align:center; font-family: monospace; }
  
  .tabs { display: flex; background: white; position: sticky; top: 71px; z-index: 999; border-bottom: 1px solid #ddd; overflow-x: auto; }
  .tab-btn { padding: 14px 10px; border: none; background: none; font-weight: bold; color: #bbb; flex: 0 0 20%; outline:none; font-size: 0.8em; white-space: nowrap; }
  .tab-btn.active { color: #F04E98; border-bottom: 3px solid #F04E98; }

  .day-content { display: none; padding: 15px; }
  .day-content.active { display: block; }

  .event-card { background: var(--card-bg); border-radius: 15px; padding: 16px; margin-bottom: 15px; box-shadow: 0 4px 12px rgba(0,0,0,0.05); position: relative; border-left: 10px solid var(--primary); transition: 0.3s; }
  .info-box { background: #f9f9f9; padding: 10px; border-radius: 8px; font-size: 0.85em; margin-bottom: 8px; border: 1px solid #eee; }
  
  .check-item { display: flex; align-items: center; background: white; padding: 12px; border-radius: 10px; margin-bottom: 8px; border-left: 5px solid #FFAD60; }
  .check-item input { width: 20px; height: 20px; margin-right: 12px; }
  
  .trans-box { background: #e3f2fd; border-left: 10px solid #2196f3; padding: 12px; border-radius: 10px; margin-bottom: 10px; font-size: 0.9em; }
  .big-add-btn { background: #F04E98; color: white; border: none; width: 100%; padding: 16px; border-radius: 35px; font-weight: bold; margin-top: 10px; }
</style>
</head>
<body>

<header id="main-header">ğŸ­ TWICE 2026 Tokyo Guide</header>

<div class="member-palette" id="global-palette"></div>

<div id="countdown">00D 00:00:00</div>

<div class="tabs">
  <button class="tab-btn active" onclick="showTab('checklist-tab', this)">check</button>
  <button class="tab-btn" onclick="showTab('day1', this)">4/25 ä¸€</button>
  <button class="tab-btn" onclick="showTab('day2', this)">4/26 äºŒ</button>
  <button class="tab-btn" onclick="showTab('day3', this)">4/27 ä¸‰</button>
  <button class="tab-btn" onclick="showTab('trans-tab', this)">äº¤é€šæŒ‡å—</button>
</div>

<div id="checklist-tab" class="day-content active">
  <h3 style="margin-top:0;">ğŸ’ å‡ºåœ‹å¿…å¸¶æ¸…å–®</h3>
  <div id="packing-list"></div>
  <button class="big-add-btn" onclick="addItem('packing-list')">ï¼‹ æ–°å¢ç‰©å“å‚™å¿˜</button>
</div>

<div id="day1" class="day-content"></div>
<div id="day2" class="day-content"></div>
<div id="day3" class="day-content"></div>

<div id="trans-tab" class="day-content">
  <h3 style="margin-top:0;">ğŸ—ºï¸ æ±äº¬äº¤é€šæŒ‡å—</h3>
  <div id="transport-list">
    <div class="trans-box"><b>âœˆï¸ æˆç”°æ©Ÿå ´ Skyliner</b><br>4/25 06:30 æŠµé”å¾Œï¼Œå¾€å¸‚å€æœ€å¿«å·¥å…·ã€‚</div>
    <div class="trans-box"><b>ğŸ’³ Apple Wallet Suica</b><br>iPhone ç›´æ¥å—¶å¡é€²ç«™ï¼Œç„¡éœ€æ’éšŠè²·ç¥¨ã€‚</div>
    <div class="trans-box"><b>ğŸŸï¸ åœ‹ç«‹ç«¶æŠ€å ´ç«™</b><br>éƒ½ç‡Ÿå¤§æ±Ÿæˆ¶ç·š A2 å‡ºå£ï¼Œå‡ºç«™å³æ˜¯æ¼”å”±æœƒå ´ã€‚</div>
    <div class="trans-box"><b>ğŸ¨ ç§‹è‘‰åŸç«™</b><br>JRã€æ—¥æ¯”è°·ç·šã€TXäº¤æœƒï¼Œé£¯åº—æ‰€åœ¨åœ°ã€‚</div>
  </div>
  <button class="big-add-btn" onclick="addTrans()">ï¼‹ æ–°å¢äº¤é€šå‚™å¿˜</button>
</div>

<script>
  // æ‡‰æ´è‰²è¨­å®š
  const officialColors = ["#F04E98", "#81D4FA", "#C5E1A5", "#F48FB1", "#B39DDB", "#FFB74D", "#80CBC4", "#F5F5F5", "#EF5350", "#64B5F6"];
  
  const initialTripData = {
    day1: [
      {time: "06:30", loc: "æŠµé”æˆç”°æ©Ÿå ´", addr: "æˆç”°æ©Ÿå ´", line: "Skyliner", station: "æˆç”°æ©Ÿå ´", memo: "æŠµé”æ—¥æœ¬ âœˆï¸", color: "#64B5F6"},
      {time: "10:30", loc: "æ¾€è°·è¿½æ˜Ÿæˆ°å€", addr: "Tower Records / 109", line: "JR/åœ°éµ", station: "æ¾€è°·ç«™", memo: "4/25 é¦–ç«™", color: "#F04E98"},
      {time: "15:00", loc: "æ–°å¤§ä¹…ä¿éŸ“åœ‹è¡—", addr: "æ–°å®¿å€", line: "JRå±±æ‰‹ç·š", station: "æ–°å¤§ä¹…ä¿", memo: "éŸ“æµè£œè²¨", color: "#EF5350"},
      {time: "17:30", loc: "æ–°å®¿å®˜æ–¹å±•ç¤ºåº—", addr: "TSUTAYA", line: "JR", station: "æ–°å®¿ç«™", memo: "æ‹ç…§é»", color: "#81D4FA"}
    ],
    day2: [
      {time: "10:00", loc: "åŸå®¿ç«¹ä¸‹é€š", addr: "ç¥å®®å‰", line: "JRå±±æ‰‹ç·š", station: "åŸå®¿ç«™", memo: "è¯åç”œé»", color: "#FFB74D"},
      {time: "13:00", loc: "æ± è¢‹æƒè²¨", addr: "Sunshine City", line: "JR", station: "æ± è¢‹ç«™", memo: "K-BOOKS", color: "#80CBC4"},
      {time: "17:00", loc: "åœ‹ç«‹ç«¶æŠ€å ´", addr: "æœƒå ´", line: "å¤§æ±Ÿæˆ¶ç·š", station: "åœ‹ç«‹ç«¶æŠ€å ´", memo: "ğŸ­ TWICE CONCERT", color: "#F04E98"}
    ],
    day3: [
      {time: "09:00", loc: "ç§‹è‘‰åŸæœ€å¾Œæ¡è²·", addr: "é£¯åº—å‘¨é‚Š", line: "JR", station: "ç§‹è‘‰åŸç«™", memo: "æœ€å¾Œæƒè²¨", color: "#C5E1A5"},
      {time: "11:00", loc: "å‰å¾€æ©Ÿå ´", addr: "æˆç”°æ©Ÿå ´", line: "Skyliner", station: "æˆç”°æ©Ÿå ´", memo: "å›å®¶âœˆï¸", color: "#64B5F6"},
      {time: "12:50", loc: "æŠµé”æˆç”°æ©Ÿå ´", addr: "èˆªå»ˆ", line: "æŠµé”", station: "æˆç”°", memo: "æº–å‚™ç™»æ©Ÿ", color: "#F5F5F5"}
    ]
  };

  let myEvents = JSON.parse(localStorage.getItem('twice_trip_v31')) || initialTripData;
  let myItems = JSON.parse(localStorage.getItem('twice_items_v31')) || ["è­·ç…§ & é–€ç¥¨", "Candy Bong (æ‰‹ç‡ˆ)", "è¡Œå‹•é›»æº", "æ—¥å¹£ç¾é‡‘"];

  // åˆå§‹åŒ–èª¿è‰²ç›¤
  const palette = document.getElementById('global-palette');
  officialColors.forEach((color, idx) => {
    const dot = document.createElement('div');
    dot.className = 'member-dot';
    dot.style.backgroundColor = color;
    dot.onclick = () => { if(idx === 0) resetTheme(); else setGlobalTheme(color); };
    palette.appendChild(dot);
  });

  function setGlobalTheme(color) {
    document.documentElement.style.setProperty('--primary', color);
    document.getElementById('main-header').style.background = color;
  }

  function resetTheme() {
    document.documentElement.style.setProperty('--primary', '#F04E98');
    document.getElementById('main-header').style.background = 'linear-gradient(135deg, #FFAD60, #F04E98)';
  }

  function renderEvents() {
    ['day1', 'day2', 'day3'].forEach(day => {
      const container = document.getElementById(day);
      container.innerHTML = myEvents[day].map((ev) => `
        <div class="event-card" style="border-left-color: ${ev.color}">
          <div style="font-weight:bold; color:var(--primary);">â° ${ev.time}</div>
          <div style="font-size:1.1em; font-weight:bold; margin:5px 0;">ğŸ“ ${ev.loc}</div>
          <div class="info-box">ğŸš‡ ${ev.line} / ${ev.station}</div>
          <div style="font-size:0.85em; color:#666;">ğŸ“ ${ev.memo}</div>
        </div>`).join('');
    });
  }

  function renderItems() {
    const list = document.getElementById('packing-list');
    list.innerHTML = myItems.map((item, i) => `
      <div class="check-item">
        <input type="checkbox">
        <span contenteditable="true" onblur="updateItem(${i}, this.innerText)">${item}</span>
        <span style="margin-left:auto; color:#ccc;" onclick="deleteItem(${i})">âœ•</span>
      </div>`).join('');
    localStorage.setItem('twice_items_v31', JSON.stringify(myItems));
  }

  function addItem() { myItems.push("æ–°ç‰©å“"); renderItems(); }
  function addTrans() { document.getElementById('transport-list').innerHTML += `<div class="trans-box" contenteditable="true">é»æ“Šç·¨è¼¯äº¤é€šå‚™å¿˜...</div>`; }
  function updateItem(i, val) { myItems[i] = val; localStorage.setItem('twice_items_v31', JSON.stringify(myItems)); }
  function deleteItem(i) { myItems.splice(i, 1); renderItems(); }

  function showTab(t, b) { 
    document.querySelectorAll('.day-content').forEach(d => d.classList.remove('active'));
    document.querySelectorAll('.tab-btn').forEach(btn => btn.classList.remove('active'));
    document.getElementById(t).classList.add('active'); b.classList.add('active'); 
  }

  setInterval(() => {
    const diff = new Date('2026-04-26T17:00:00+09:00') - new Date();
    const d = Math.floor(diff/86400000), h = Math.floor((diff/3600000)%24), m = Math.floor((diff/60000)%60), s = Math.floor((diff/1000)%60);
    document.getElementById('countdown').innerText = diff > 0 ? `${d}D ${h}:${m}:${s}` : 'SHOW TIME! ğŸ­';
  }, 1000);

  renderEvents(); renderItems();
</script>
</body>
</html>
