<!DOCTYPE html>
<html lang="zh-TW">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
<title>TWICE 2026 Interactive Guide</title>
<style>
  :root { --primary: #d6336c; --secondary: #ff85a1; --bg: #f8f9fa; --success: #28a745; --info: #17a2b8; --warning: #ffc107; }
  body { font-family: -apple-system, system-ui, sans-serif; margin:0; background: var(--bg); padding-bottom: 100px; }
  header { background: var(--primary); color:white; text-align:center; padding:15px; font-weight:bold; position:sticky; top:0; z-index:1000; }
  #countdown { background:#333; color:var(--secondary); font-size:1.1em; padding:8px; text-align:center; font-family: monospace; font-weight: bold; }

  .tabs { display: flex; justify-content: space-around; background: white; border-bottom: 1px solid #ddd; position: sticky; top: 50px; z-index: 999; }
  .tab-btn { padding: 12px; border: none; background: none; font-weight: bold; color: #666; flex: 1; font-size: 0.85em; }
  .tab-btn.active { color: var(--primary); border-bottom: 3px solid var(--primary); background: #fff0f3; }

  .day-content { display: none; padding: 15px; }
  .day-content.active { display: block; }

  /* è¡Œç¨‹å¡ç‰‡ */
  .event-card { background: white; border-radius: 12px; padding: 15px; margin-bottom: 15px; box-shadow: 0 3px 10px rgba(0,0,0,0.08); position: relative; border-left: 6px solid var(--info); }
  .event-card.concert { border-left-color: var(--primary); background: #fff0f3; }
  
  /* å¯ç·¨è¼¯å€åŸŸæ¨£å¼ */
  [contenteditable="true"] { border: 1px dashed transparent; transition: 0.3s; padding: 2px 4px; border-radius: 4px; outline: none; }
  [contenteditable="true"]:focus { border-color: var(--primary); background: #fff9fa; }
  [contenteditable="true"]:hover { border-color: #ccc; cursor: text; }

  .time-tag { font-size: 0.85em; font-weight: bold; color: var(--primary); display: block; margin-bottom: 5px; }
  .loc-title { font-size: 1.1em; font-weight: bold; color: #222; display: block; margin-bottom: 8px; }
  
  .transport-box { background: #f1f3f5; padding: 10px; border-radius: 8px; font-size: 0.85em; color: #444; margin-bottom: 10px; }
  .station-label { font-weight: bold; color: #333; }
  
  .memo-content { font-size: 0.85em; color: #666; line-height: 1.5; white-space: pre-wrap; }
  
  .del-btn { position: absolute; right: 10px; top: 10px; color: #ddd; border: none; background: none; font-size: 1.2em; cursor: pointer; }
  .add-area { text-align: center; margin: 20px 0; }
  .big-add-btn { background: var(--primary); color: white; border: none; padding: 10px 30px; border-radius: 20px; font-weight: bold; box-shadow: 0 4px 10px rgba(214, 51, 108, 0.3); }

  /* è£å‚™æ¸…å–® */
  .check-item { display: flex; align-items: center; background: white; padding: 12px; margin-bottom: 8px; border-radius: 10px; border: 1px solid #eee; }
  .check-item input { width: 20px; height: 20px; margin-right: 12px; }
</style>
</head>
<body>

<header>ğŸ­ TWICE 2026 è¡Œç¨‹ç­†è¨˜æœ¬</header>
<div id="countdown">00D 00:00:00</div>

<div class="tabs">
  <button class="tab-btn active" onclick="showTab('checklist-tab', this)">ğŸ§³ è£å‚™æ¸…å–®</button>
  <button class="tab-btn" onclick="showTab('day1', this)">4/25</button>
  <button class="tab-btn" onclick="showTab('day2', this)">4/26</button>
  <button class="tab-btn" onclick="showTab('day3', this)">4/27</button>
</div>

<div id="checklist-tab" class="day-content active">
  <div id="packing-list">
    <div class="check-item"><input type="checkbox"><span>è­·ç…§ & æ©Ÿç¥¨</span></div>
    <div class="check-item"><input type="checkbox"><span>Candybong æ‡‰æ´æ£’</span></div>
    <div class="check-item"><input type="checkbox"><span>æ¼”å”±æœƒé›»å­é–€ç¥¨æˆªåœ–</span></div>
  </div>
  <div style="margin-top:20px; display:flex;">
    <input type="text" id="new-item-input" placeholder="æ–°å¢æ¸…å–®..." style="flex:1; padding:12px; border:1px solid #ddd; border-radius:8px 0 0 8px;">
    <button onclick="addItem()" style="padding:12px; background:var(--primary); color:white; border:none; border-radius:0 8px 8px 0;">åŠ å…¥</button>
  </div>
</div>

<div id="day1" class="day-content"></div>
<div id="day2" class="day-content"></div>
<div id="day3" class="day-content"></div>

<div class="add-area">
  <button class="big-add-btn" onclick="addNewEmptyEvent()">ï¼‹ åŠ å…¥è‡ªè¨‚è¡Œç¨‹</button>
</div>

<script>
  // æ ¸å¿ƒè³‡æ–™çµæ§‹
  const defaultData = {
    day1: [
      {time: "10:30", loc: "K-spot (æ±äº¬ç«™)", station: "æ±äº¬ç«™ å…«é‡æ´²åœ°ä¸‹ä¸­å¤®å£", memo: "å®˜æ–¹å¿«é–ƒåº—é›†ä¸­åœ°"},
      {time: "13:00", loc: "æ± è¢‹ K-BOOKS å·¡ç¦®", station: "æ± è¢‹ç«™ æ±å£ 35è™Ÿå‡ºå£", memo: "K-POPé¤¨ã€å½±ç‰‡é¤¨"},
      {time: "15:30", loc: "Tower Records æ± è¢‹åº—", station: "æ± è¢‹ç«™ P'PARCO 6F", memo: "é ˜å–æ‡‰æ´å¡"}
    ],
    day2: [
      {time: "11:00", loc: "æ¾€è°· Tower Records æ——è‰¦åº—", station: "æ¾€è°·ç«™ B1 å‡ºå£", memo: "1Fã€5Fã€6F å¿…é€›"},
      {time: "14:00", loc: "Mandarake & 109", station: "æ¾€è°·ç«™ A2 å‡ºå£", memo: "æ‰¾çµ•ç‰ˆå°å¡"},
      {time: "17:00", loc: "ğŸŸ åœ‹ç«‹ç«¶æŠ€å ´ æ¼”å”±æœƒ", station: "åœ‹ç«‹ç«¶æŠ€å ´ A2å‡ºå£", memo: "TWICE CONCERT! ğŸ­", special: "concert"}
    ],
    day3: [
      {time: "10:00", loc: "æ–°å¤§ä¹…ä¿éŸ“åœ‹è¡—", station: "JR æ–°å¤§ä¹…ä¿ç«™", memo: "Seoul Record, MOIZA, éŸ“æµç™¾è²¨"},
      {time: "13:00", loc: "æ–°å®¿ Tower Records", station: "æ–°å®¿ç«™ æ±å—å£ Flags", memo: "ç°½åæ¿äº®é»"},
      {time: "16:00", loc: "âœˆï¸ å‰å¾€æˆç”°æ©Ÿå ´", station: "æ–°å®¿ NEX æœˆå°", memo: "å›å®¶å›‰ï¼"}
    ]
  };

  let myEvents = JSON.parse(localStorage.getItem('twice_v10_data')) || defaultData;
  let activeTab = 'day1';

  function renderEvents() {
    ['day1', 'day2', 'day3'].forEach(day => {
      const container = document.getElementById(day);
      container.innerHTML = "";
      myEvents[day].forEach((ev, index) => {
        container.innerHTML += `
          <div class="event-card ${ev.special || ''}">
            <button class="del-btn" onclick="deleteEvent('${day}', ${index})">Ã—</button>
            <span class="time-tag" contenteditable="true" onblur="updateData('${day}', ${index}, 'time', this.innerText)">â° ${ev.time}</span>
            <span class="loc-title" contenteditable="true" onblur="updateData('${day}', ${index}, 'loc', this.innerText)">ğŸ“ ${ev.loc}</span>
            <div class="transport-box">
              ğŸš‰ <span class="station-label" contenteditable="true" onblur="updateData('${day}', ${index}, 'station', this.innerText)">${ev.station}</span>
            </div>
            <div class="memo-content" contenteditable="true" onblur="updateData('${day}', ${index}, 'memo', this.innerText)">${ev.memo}</div>
          </div>
        `;
      });
    });
    localStorage.setItem('twice_v10_data', JSON.stringify(myEvents));
  }

  // å¯¦æ™‚æ›´æ–°è³‡æ–™
  function updateData(day, index, field, value) {
    let cleanValue = value.replace('â° ', '').replace('ğŸ“ ', '');
    myEvents[day][index][field] = cleanValue;
    localStorage.setItem('twice_v10_data', JSON.stringify(myEvents));
  }

  function addNewEmptyEvent() {
    if (activeTab === 'checklist-tab') {
        alert("è«‹å…ˆåˆ‡æ›åˆ°æ—¥æœŸåˆ†é å†æ–°å¢è¡Œç¨‹å–”ï¼");
        return;
    }
    myEvents[activeTab].push({time: "12:00", loc: "æ–°åœ°é»", station: "è«‹è¼¸å…¥å‡ºå£", memo: "è«‹è¼¸å…¥å‚™è¨»"});
    renderEvents();
  }

  function deleteEvent(day, index) {
    if(confirm("ç¢ºå®šåˆªé™¤ï¼Ÿ")) {
      myEvents[day].splice(index, 1);
      renderEvents();
    }
  }

  function addItem() {
    const val = document.getElementById('new-item-input').value;
    if(!val) return;
    const div = document.createElement('div');
    div.className = "check-item";
    div.innerHTML = `<input type="checkbox"> <span>${val}</span>`;
    document.getElementById('packing-list').appendChild(div);
    document.getElementById('new-item-input').value = "";
  }

  function showTab(tabId, btn) {
    activeTab = tabId;
    document.querySelectorAll('.day-content').forEach(d => d.classList.remove('active'));
    document.querySelectorAll('.tab-btn').forEach(b => b.classList.remove('active'));
    document.getElementById(tabId).classList.add('active');
    btn.classList.add('active');
    
    // éš±è—/é¡¯ç¤ºæ–°å¢æŒ‰éˆ•
    document.querySelector('.add-area').style.display = (tabId === 'checklist-tab') ? 'none' : 'block';
  }

  function updateCountdown() {
    const target = new Date('2026-04-26T17:00:00+09:00');
    const now = new Date();
    const diff = target - now;
    if (diff <= 0) { document.getElementById('countdown').innerText = 'ENJOY THE SHOW! ğŸ­'; return; }
    const d = Math.floor(diff / (1000 * 60 * 60 * 24)).toString().padStart(2, '0');
    const h = Math.floor((diff / (1000 * 60 * 60)) % 24).toString().padStart(2, '0');
    const m = Math.floor((diff / 1000 / 60) % 60).toString().padStart(2, '0');
    const s = Math.floor((diff / 1000) % 60).toString().padStart(2, '0');
    document.getElementById('countdown').innerText = `${d}D ${h}:${m}:${s}`;
  }

  setInterval(updateCountdown, 1000);
  renderEvents();
  // é è¨­éš±è—æ–°å¢æŒ‰éˆ• (å› ç‚ºåˆå§‹æ˜¯è£å‚™åˆ†é )
  document.querySelector('.add-area').style.display = 'none';
</script>

</body>
</html>
