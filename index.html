<!DOCTYPE html>
<html lang="zh-TW">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
<title>TWICE 2026 Tokyo Final Mission</title>
<style>
  :root { --primary: #d6336c; --secondary: #ff85a1; --bg: #f8f9fa; --success: #28a745; --info: #17a2b8; --warning: #ffc107; }
  body { font-family: -apple-system, system-ui, sans-serif; margin:0; background: var(--bg); padding-bottom: 100px; }
  header { background: var(--primary); color:white; text-align:center; padding:15px; font-weight:bold; position:sticky; top:0; z-index:1000; box-shadow: 0 2px 5px rgba(0,0,0,0.1); }
  #countdown { background:#333; color:var(--secondary); font-size:1.1em; padding:8px; text-align:center; font-family: 'Courier New', monospace; font-weight: bold; }

  .tabs { display: flex; justify-content: space-around; background: white; border-bottom: 1px solid #ddd; position: sticky; top: 50px; z-index: 999; }
  .tab-btn { padding: 12px; border: none; background: none; font-weight: bold; color: #666; flex: 1; font-size: 0.85em; }
  .tab-btn.active { color: var(--primary); border-bottom: 3px solid var(--primary); background: #fff0f3; }

  .day-content { display: none; padding: 15px; }
  .day-content.active { display: block; }

  /* è¡Œç¨‹å¡ç‰‡å„ªåŒ– */
  .event-card { background: white; border-radius: 12px; padding: 15px; margin-bottom: 15px; box-shadow: 0 3px 10px rgba(0,0,0,0.08); position: relative; border-left: 6px solid var(--info); }
  .event-card.concert { border-left-color: var(--primary); background: #fff0f3; animation: glow 2s infinite; }
  @keyframes glow { 0% { box-shadow: 0 0 5px #ff85a1; } 50% { box-shadow: 0 0 15px #ff85a1; } 100% { box-shadow: 0 0 5px #ff85a1; } }

  .time-tag { font-size: 0.8em; font-weight: bold; color: var(--primary); margin-bottom: 5px; display: block; }
  .loc-title { font-size: 1.1em; font-weight: bold; color: #222; margin-bottom: 8px; display: block; }
  
  .transport-box { background: #f1f3f5; padding: 10px; border-radius: 8px; font-size: 0.85em; color: #444; margin-bottom: 10px; border-left: 3px solid #ced4da; }
  .station-name { background: #343a40; color: #fff; padding: 2px 6px; border-radius: 4px; font-weight: bold; }
  .exit-name { background: var(--warning); color: #000; padding: 2px 6px; border-radius: 4px; font-weight: bold; }
  
  .memo-content { font-size: 0.85em; color: #666; line-height: 1.5; padding-left: 5px; }
  .del-btn { position: absolute; right: 10px; top: 10px; color: #ccc; border: none; background: none; font-size: 1.5em; cursor: pointer; }

  /* è£å‚™æ¸…å–® */
  .check-item { display: flex; align-items: center; background: white; padding: 12px; margin-bottom: 8px; border-radius: 10px; border: 1px solid #eee; }
  .check-item input { width: 20px; height: 20px; margin-right: 12px; }

  /* ç·¨è¼¯å€ */
  .edit-form { background: white; padding: 20px; border-radius: 15px; box-shadow: 0 4px 15px rgba(0,0,0,0.1); }
  .edit-form input, .edit-form select, .edit-form textarea { width: 100%; padding: 12px; margin-bottom: 15px; border: 1px solid #ddd; border-radius: 8px; box-sizing: border-box; font-size: 1em; }
  .submit-btn { background: var(--primary); color: white; border: none; width: 100%; padding: 15px; border-radius: 8px; font-weight: bold; font-size: 1.1em; }
</style>
</head>
<body>

<header>ğŸ­ TWICE 2026 æ±äº¬æ”»å …è¨ˆç•«</header>
<div id="countdown">00D 00:00:00</div>

<div class="tabs">
  <button class="tab-btn active" onclick="showTab('checklist-tab', this)">ğŸ§³ è£å‚™</button>
  <button class="tab-btn" onclick="showTab('day1', this)">4/25(äº”)</button>
  <button class="tab-btn" onclick="showTab('day2', this)">4/26(å…­)</button>
  <button class="tab-btn" onclick="showTab('day3', this)">4/27(æ—¥)</button>
  <button class="tab-btn" onclick="showTab('edit-tab', this)">â• èª¿æ•´</button>
</div>

<div id="checklist-tab" class="day-content active">
  <div id="packing-list">
    <div class="check-item"><input type="checkbox"><span>è­·ç…§ & æ©Ÿç¥¨ (æœ€é‡è¦!)</span></div>
    <div class="check-item"><input type="checkbox"><span>Candybong æ‡‰æ´æ£’ (å·²æª¢æŸ¥é›»æ± )</span></div>
    <div class="check-item"><input type="checkbox"><span>æ¼”å”±æœƒé›»å­é–€ç¥¨ QR Code æˆªåœ–</span></div>
    <div class="check-item"><input type="checkbox"><span>è¡Œå‹•é›»æº & å……é›»ç·š (å…©çµ„)</span></div>
    <div class="check-item"><input type="checkbox"><span>VJW å…¥å¢ƒå¯©æŸ¥ QR Code</span></div>
    <div class="check-item"><input type="checkbox"><span>ç¡¬æ®¼ A4 è³‡æ–™å¤¾ (ä¿è­·æµ·å ±)</span></div>
  </div>
  <div style="margin-top:20px; display:flex;">
    <input type="text" id="new-item-input" placeholder="æ‰‹å‹•å¢åŠ è£å‚™..." style="flex:1; padding:12px; border:1px solid #ddd; border-radius:8px 0 0 8px;">
    <button onclick="addItem()" style="padding:12px; background:var(--primary); color:white; border:none; border-radius:0 8px 8px 0;">åŠ å…¥</button>
  </div>
</div>

<div id="day1" class="day-content"></div>
<div id="day2" class="day-content"></div>
<div id="day3" class="day-content"></div>

<div id="edit-tab" class="day-content">
  <div class="edit-form">
    <h3 style="margin-top:0; color:var(--primary);">æ–°å¢/èª¿æ•´è¡Œç¨‹</h3>
    <select id="target-day">
      <option value="day1">ç¬¬ä¸€å¤© (4/25)</option>
      <option value="day2">ç¬¬äºŒå¤© (4/26)</option>
      <option value="day3">ç¬¬ä¸‰å¤© (4/27)</option>
    </select>
    <input type="text" id="add-time" placeholder="æ™‚é–“ (ä¾‹å¦‚ 10:30)">
    <input type="text" id="add-loc" placeholder="åœ°é»åç¨±">
    <input type="text" id="add-station" placeholder="è»Šç«™èˆ‡å‡ºå£ (ä¾‹å¦‚ æ± è¢‹ç«™ 35è™Ÿå‡ºå£)">
    <textarea id="add-memo" rows="3" placeholder="å‚™è¨»æ¸…å–® (è¦è²·ä»€éº¼ã€å¿…çœ‹äº®é»)"></textarea>
    <button class="submit-btn" onclick="addEvent()">ç¢ºèªåŠ å…¥è¡Œç¨‹è¡¨</button>
  </div>
</div>

<script>
  // æ·±åº¦é è¨­è¡Œç¨‹
  const defaultEvents = {
    day1: [
      {time: "10:30", loc: "K-spot (æ±äº¬ä¸€ç•ªè¡—)", station: "æ±äº¬ç«™ å…«é‡æ´²åœ°ä¸‹ä¸­å¤®å£", memo: "å®˜æ–¹è¯åå¿«é–ƒåº—é›†ä¸­åœ°ï¼Œæ‰¾å°‹ TWICE è¯åå°ç‰©ã€‚"},
      {time: "13:00", loc: "æ± è¢‹ K-BOOKS å·¡ç¦®", station: "æ± è¢‹ç«™ æ±å£ 35è™Ÿå‡ºå£", memo: "1. K-POPé¤¨ (2F): æ»¿æ»¿çš„å°å¡ç‰†<br>2. å½±ç‰‡é¤¨ (1F): äºŒæ‰‹é€±é‚Š<br>3. Cast Pavilion: å®˜æ–¹å¯«çœŸå¡"},
      {time: "15:30", loc: "Tower Records æ± è¢‹åº—", station: "æ± è¢‹ç«™ æ±å£ P'PARCO 6F", memo: "å¿…çœ‹å›æ­¸ç‰¹è¨­çœ‹æ¿ï¼Œé ˜å–æ‡‰æ´å¡ç‰‡ã€‚"}
    ],
    day2: [
      {time: "10:30", loc: "æ¾€è°· Tower Records æ——è‰¦åº—", station: "æ¾€è°·ç«™ B1 å‡ºå£", memo: "æ—¥æœ¬æœ€å¤§åº—ï¼å¿…å» 1F å±•ç¤ºå€ã€5F K-POP å°ˆå€ã€6F Tower Vinyl é»‘è† ã€‚"},
      {time: "13:00", loc: "Mandarake Shibuya", station: "æ¾€è°·ç«™ A2 å‡ºå£", memo: "ä½æ–¼ BEAM B2ï¼Œå°‹æ‰¾æ—©æœŸçµ•ç‰ˆé€±é‚Šèˆ‡ç½•è¦‹ç”Ÿå¯«çœŸã€‚"},
      {time: "14:30", loc: "æ¾€è°· 109 & MAGNET", station: "æ¾€è°·ç«™ A2 å‡ºå£", memo: "çœ‹ 109 å¤§ç‰†æµ·å ±ï¼ŒMAGNET é ‚æ¨“æœ‰æ™‚æœ‰è¯åã€‚"},
      {time: "17:00", loc: "ğŸŸ åœ‹ç«‹ç«¶æŠ€å ´ (æ¼”å”±æœƒ)", station: "åœ‹ç«‹ç«¶æŠ€å ´ç«™ A2å‡ºå£ / åƒé§„è°·ç«™", memo: "2026 TWICE æ±äº¬å ´ï¼ææ—©å»é ˜æ‡‰æ´ï¼ŒCandybong æº–å‚™ï¼", special: "concert"}
    ],
    day3: [
      {time: "10:00", loc: "æ–°å¤§ä¹…ä¿éŸ“åœ‹è¡— (è–åœ°é›†ä¸­)", station: "JR æ–°å¤§ä¹…ä¿ç«™ å–®ä¸€å‡ºå£", memo: "é€™å€å¿…é€›ï¼š<br>1. Seoul Record (è€å­—è™Ÿ)<br>2. MOIZA (æ‡‰æ´æ£’é…ä»¶)<br>3. éŸ“æµãªã‚‰ & Hallyu Hyakkaten<br>4. Idol Park (å°å¡å¡å¥—)"},
      {time: "13:00", loc: "æ–°å®¿ Tower Records", station: "æ–°å®¿ç«™ æ±å—å£ Flagså¤§æ¨“", memo: "æ–°å®¿åº—é€šå¸¸æœ‰åœ˜å“¡è¦ªç­†ç°½åæ¿ã€‚"},
      {time: "14:30", loc: "HMV&BOOKS SPOT æ–°å®¿", station: "æ–°å®¿ç«™ æ±å£ Lumine Est B1", memo: "æœ€å¾Œè£œè²¨ï¼Œçœ‹çœ‹æœ‰æ²’æœ‰æ¼æ‰çš„å°ˆè¼¯ç‰ˆæœ¬ã€‚"},
      {time: "16:00", loc: "âœˆï¸ å‰å¾€æˆç”°æ©Ÿå ´", station: "æ–°å®¿/æ¾€è°·ç«™ NEX æœˆå°", memo: "å¸¶è‘—æ»¿æ»¿çš„å›æ†¶èˆ‡æˆ°åˆ©å“å›èˆªï¼"}
    ]
  };

  let myEvents = JSON.parse(localStorage.getItem('twice_ultimate_v9')) || defaultEvents;

  function renderEvents() {
    ['day1', 'day2', 'day3'].forEach(day => {
      const container = document.getElementById(day);
      container.innerHTML = "";
      myEvents[day].forEach((ev, index) => {
        container.innerHTML += `
          <div class="event-card ${ev.special || ''}">
            <button class="del-btn" onclick="deleteEvent('${day}', ${index})">Ã—</button>
            <span class="time-tag">â° ${ev.time}</span>
            <span class="loc-title">ğŸ“ ${ev.loc}</span>
            <div class="transport-box">ğŸš‰ <span class="station-name">${ev.station.split(' ')[0]}</span> <span class="exit-name">${ev.station.split(' ').slice(1).join(' ')}</span></div>
            <div class="memo-content">${ev.memo}</div>
          </div>
        `;
      });
    });
    localStorage.setItem('twice_ultimate_v9', JSON.stringify(myEvents));
  }

  function addEvent() {
    const day = document.getElementById('target-day').value;
    const time = document.getElementById('add-time').value;
    const loc = document.getElementById('add-loc').value;
    const station = document.getElementById('add-station').value;
    const memo = document.getElementById('add-memo').value;
    if(!loc || !station) return alert("åœ°é»èˆ‡è»Šç«™æ˜¯å¿…å¡«çš„å–”ï¼");
    myEvents[day].push({time, loc, station, memo: memo.replace(/\n/g, '<br>')});
    myEvents[day].sort((a,b) => a.time.localeCompare(b.time));
    renderEvents();
    alert("è¡Œç¨‹å·²æ›´æ–°ï¼");
    showTab(day, document.querySelector(`[onclick="showTab('${day}', this)"]`));
  }

  function deleteEvent(day, index) {
    if(confirm("ç¢ºå®šè¦åˆªé™¤é€™é …è¡Œç¨‹å—ï¼Ÿ")) {
      myEvents[day].splice(index, 1);
      renderEvents();
    }
  }

  function addItem() {
    const val = document.getElementById('new-item-input').value;
    if(!val) return;
    const div = document.createElement('div');
    div.className = "check-item";
    div.innerHTML = `<input type="checkbox"> <span>${val}</span>`;
    document.getElementById('packing-list').appendChild(div);
    document.getElementById('new-item-input').value = "";
  }

  function showTab(tabId, btn) {
    document.querySelectorAll('.day-content').forEach(d => d.classList.remove('active'));
    document.querySelectorAll('.tab-btn').forEach(b => b.classList.remove('active'));
    document.getElementById(tabId).classList.add('active');
    btn.classList.add('active');
  }

  function updateCountdown() {
    const target = new Date('2026-04-26T17:00:00+09:00');
    const now = new Date();
    const diff = target - now;
    if (diff <= 0) { document.getElementById('countdown').innerText = 'ENJOY THE SHOW! ğŸ­'; return; }
    const d = Math.floor(diff / (1000 * 60 * 60 * 24)).toString().padStart(2, '0');
    const h = Math.floor((diff / (1000 * 60 * 60)) % 24).toString().padStart(2, '0');
    const m = Math.floor((diff / 1000 / 60) % 60).toString().padStart(2, '0');
    const s = Math.floor((diff / 1000) % 60).toString().padStart(2, '0');
    document.getElementById('countdown').innerText = `${d}D ${h}:${m}:${s}`;
  }

  setInterval(updateCountdown, 1000);
  renderEvents();
</script>

</body>
</html>
