<!DOCTYPE html>
<html lang="zh-TW">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
<title>TWICE 2026 Tokyo Guide</title>

<link rel="apple-touch-icon" sizes="192x192" href="icon-192.png">
<link rel="icon" type="image/png" href="icon-192.png">
<meta name="apple-mobile-web-app-capable" content="yes">

<style>
  :root { 
    --primary: #d6336c; --bg: #f8f9fa; --card-bg: #ffffff; --text: #222; 
    /* æˆå“¡è‰²å®šç¾© */
    --color-twice: linear-gradient(135deg, #FFC107, #E91E63);
    --color-nayeon: #80DEEA; --color-jeongyeon: #A5D6A7; --color-momo: #F48FB1;
    --color-sana: #9575CD; --color-jihyo: #FFEB3B; --color-mina: #4DB6AC;
    --color-dahyun: #ffffff; --color-chaeyoung: #E53935; --color-tzuyu: #1E88E5;
  }

  body { font-family: -apple-system, sans-serif; margin:0; background: var(--bg); color: var(--text); padding-bottom: 120px; }
  header { background: var(--primary); color:white; text-align:center; padding:15px; font-weight:bold; position:sticky; top:0; z-index:1000; }
  
  /* æˆå“¡å¿«é€Ÿåˆ‡æ›è‰²ç›¤ (å…¨åŸŸ) */
  .member-palette { display: flex; overflow-x: auto; padding: 10px; gap: 8px; background: #eee; }
  .member-dot { min-width: 30px; height: 30px; border-radius: 50%; border: 2px solid white; box-shadow: 0 2px 4px rgba(0,0,0,0.1); flex-shrink: 0; }

  #countdown { background:#333; color:#ff85a1; font-size:1em; padding:8px; text-align:center; font-family: monospace; }
  .tabs { display: flex; background: white; position: sticky; top: 50px; z-index: 999; border-bottom: 1px solid #ddd; }
  .tab-btn { padding: 12px; border: none; background: none; font-weight: bold; color: #888; flex: 1; }
  .tab-btn.active { color: var(--primary); border-bottom: 3px solid var(--primary); }

  .day-content { display: none; padding: 15px; }
  .day-content.active { display: block; }

  /* è¡Œç¨‹å¡ç‰‡ï¼šå¢åŠ é¡è‰²é‚Šæ¡†è‡ªè¨‚ */
  .event-card { 
    background: var(--card-bg); border-radius: 12px; padding: 15px; margin-bottom: 15px; 
    box-shadow: 0 3px 10px rgba(0,0,0,0.08); position: relative; 
    border-left: 10px solid var(--primary); /* é è¨­é¡è‰² */
    transition: 0.3s;
  }

  /* é¡è‰²é¸æ“‡æµ®çª— */
  .color-picker-overlay {
    display: none; position: fixed; bottom: 0; left: 0; right: 0; background: white; 
    padding: 20px; border-radius: 20px 20px 0 0; z-index: 2000; box-shadow: 0 -5px 20px rgba(0,0,0,0.2);
  }
  .picker-grid { display: grid; grid-template-columns: repeat(5, 1fr); gap: 10px; text-align: center; font-size: 0.7em; }
  .picker-dot { width: 45px; height: 45px; border-radius: 50%; margin: 0 auto 5px; border: 1px solid #ddd; }

  .time-tag { font-size: 0.85em; font-weight: bold; display: block; }
  .loc-title { font-size: 1.1em; font-weight: bold; margin: 5px 0; display: block; }
  .address-box { background: #fdfdfd; padding: 8px; border-radius: 6px; font-size: 0.8em; margin-bottom: 8px; border: 1px dashed #ccc; }
  
  .big-add-btn { background: var(--primary); color: white; border: none; width: 100%; padding: 15px; border-radius: 30px; font-weight: bold; margin-top: 10px; }
  .route-planner { background: #4285F4; color: white; border: none; width: 100%; padding: 12px; border-radius: 10px; font-weight: bold; margin-bottom: 10px; }
</style>
</head>
<body>

<header id="main-header">ğŸ­ TWICE 2026 è¡Œç¨‹</header>

<div class="member-palette">
  <div class="member-dot" style="background: linear-gradient(to right, #FFC107, #E91E63)" onclick="setGlobalTheme('#d6336c')"></div>
  <div class="member-dot" style="background: #80DEEA" onclick="setGlobalTheme('#80DEEA')"></div>
  <div class="member-dot" style="background: #A5D6A7" onclick="setGlobalTheme('#A5D6A7')"></div>
  <div class="member-dot" style="background: #F48FB1" onclick="setGlobalTheme('#F48FB1')"></div>
  <div class="member-dot" style="background: #9575CD" onclick="setGlobalTheme('#9575CD')"></div>
  <div class="member-dot" style="background: #FFEB3B" onclick="setGlobalTheme('#FFEB3B')"></div>
  <div class="member-dot" style="background: #4DB6AC" onclick="setGlobalTheme('#4DB6AC')"></div>
  <div class="member-dot" style="background: #ffffff" onclick="setGlobalTheme('#ffffff')"></div>
  <div class="member-dot" style="background: #E53935" onclick="setGlobalTheme('#E53935')"></div>
  <div class="member-dot" style="background: #1E88E5" onclick="setGlobalTheme('#1E88E5')"></div>
</div>

<div id="countdown">00D 00:00:00</div>

<div class="tabs">
  <button class="tab-btn active" onclick="showTab('checklist-tab', this)">ğŸ§³ CHECK</button>
  <button class="tab-btn" onclick="showTab('day1', this)">4/25</button>
  <button class="tab-btn" onclick="showTab('day2', this)">4/26</button>
  <button class="tab-btn" onclick="showTab('day3', this)">4/27</button>
</div>

<div id="checklist-tab" class="day-content active">
  <div id="packing-list"></div>
  <button class="big-add-btn" onclick="addCheckItem()">ï¼‹ æ–°å¢å‚™å¿˜ç‰©å“</button>
</div>

<div id="day1" class="day-content"></div>
<div id="day2" class="day-content"></div>
<div id="day3" class="day-content"></div>

<div class="add-area" id="add-btn-container" style="display:none; padding: 0 15px;">
  <button class="route-planner" onclick="generateDailyRoute()">ğŸ—ºï¸ ç”Ÿæˆ Google Maps è·¯ç·š</button>
  <button class="big-add-btn" onclick="addNewEvent()">ï¼‹ æ–°å¢è¡Œç¨‹åœ°é»</button>
</div>

<div id="color-picker" class="color-picker-overlay">
  <h4 style="margin-top:0">é¸æ“‡æ­¤å€å¡Šä»£è¡¨è‰²</h4>
  <div class="picker-grid" id="picker-grid"></div>
  <button onclick="closePicker()" style="width:100%; margin-top:15px; padding:10px; border-radius:10px; border:none; background:#eee;">å–æ¶ˆ</button>
</div>

<script>
  // æˆå“¡è³‡æ–™å®šç¾©
  const memberColors = [
    { name: "TWICE", color: "#d6336c" },
    { name: "å¨œç’‰", color: "#80DEEA" }, { name: "å®šå»¶", color: "#A5D6A7" }, { name: "Momo", color: "#F48FB1" },
    { name: "Sana", color: "#9575CD" }, { name: "å¿—æ•ˆ", color: "#FFEB3B" }, { name: "Mina", color: "#4DB6AC" },
    { name: "å¤šè³¢", color: "#ffffff" }, { name: "å½©ç‘›", color: "#E53935" }, { name: "å­ç‘œ", color: "#1E88E5" }
  ];

  let myItems = JSON.parse(localStorage.getItem('twice_items_v18')) || [{text: "è­·ç…§", checked: false}];
  let myEvents = JSON.parse(localStorage.getItem('twice_trip_v18')) || {
    day1: [{time: "10:00", loc: "æ±äº¬ç«™", addr: "æ±äº¬éƒ½åƒä»£ç”°å€ä¸¸ä¹‹å…§1-9-1", memo: "K-spot", color: "#d6336c"}],
    day2: [{time: "17:00", loc: "åœ‹ç«‹ç«¶æŠ€å ´", addr: "æ±äº¬éƒ½æ–°å®¿å€éœä¸˜ç”º10-1", memo: "Concert", color: "#d6336c", special: "concert"}],
    day3: [{time: "10:00", loc: "æ–°å¤§ä¹…ä¿", addr: "æ±äº¬éƒ½æ–°å®¿å€å¤§ä¹…ä¿", memo: "è£œè²¨", color: "#d6336c"}]
  };
  let activeTab = 'checklist-tab';

