<!DOCTYPE html>
<html lang="zh-TW">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
<title>TWICE 2026 Ultimate Guide</title>
<style>
  :root { --primary: #d6336c; --bg: #f8f9fa; --success: #28a745; --danger: #ff4d4d; --warning: #fd7e14; }
  body { font-family: -apple-system, system-ui, sans-serif; margin:0; background: var(--bg); padding-bottom: 100px; }
  header { background: var(--primary); color:white; text-align:center; padding:15px; font-weight:bold; position:sticky; top:0; z-index:1000; }
  #countdown { background:#333; color:#ff85a1; font-size:1.1em; padding:8px; text-align:center; font-family: monospace; }

  .tabs { display: flex; justify-content: space-around; background: white; border-bottom: 1px solid #ddd; position: sticky; top: 50px; z-index: 999; }
  .tab-btn { padding: 12px; border: none; background: none; font-weight: bold; color: #666; flex: 1; font-size: 0.8em; }
  .tab-btn.active { color: var(--primary); border-bottom: 3px solid var(--primary); background: #fff0f3; }

  .day-content { display: none; padding: 15px; }
  .day-content.active { display: block; }

  /* ç·¨è¼¯å€ */
  .edit-zone { background: #fff; padding: 15px; margin-bottom: 20px; border-radius: 12px; border: 2px dashed var(--primary); }
  .edit-zone input, .edit-zone select, .edit-zone textarea { width: 100%; margin-bottom: 10px; padding: 8px; border: 1px solid #ccc; border-radius: 5px; box-sizing: border-box; }
  .add-btn { background: var(--primary); color: white; border: none; width: 100%; padding: 10px; border-radius: 5px; font-weight: bold; }

  /* è¡Œç¨‹å¡ç‰‡ */
  .event-card { background: white; border-radius: 12px; padding: 15px; margin-bottom: 12px; box-shadow: 0 2px 8px rgba(0,0,0,0.05); position: relative; border-left: 5px solid var(--success); }
  .event-card.is-concert { border-left-color: var(--primary); background: #fff0f3; }
  .del-btn { position: absolute; right: 10px; top: 10px; color: #ccc; border: none; background: none; font-size: 1.2em; cursor: pointer; }
  .time-label { font-size: 0.8em; color: #888; font-weight: bold; }
  .loc-label { font-size: 1.05em; font-weight: bold; display: block; margin: 5px 0; color: #333; }
  .memo-label { font-size: 0.85em; color: #555; background: #f1f3f5; padding: 8px; border-radius: 6px; display: block; line-height: 1.4; }
  .tag { background: var(--warning); color: white; padding: 2px 5px; border-radius: 4px; font-size: 0.75em; margin-right: 5px; }

  /* è£å‚™æ¸…å–® */
  .check-item { display: flex; align-items: center; background: white; padding: 12px; margin-bottom: 8px; border-radius: 10px; box-shadow: 0 1px 3px rgba(0,0,0,0.1); }
  .check-item input[type="checkbox"] { margin-right: 12px; width: 20px; height: 20px; }
</style>
</head>
<body>

<header>ğŸ­ TWICE 2026 æ±äº¬å…¨æ”»ç•¥</header>
<div id="countdown">00D 00:00:00</div>

<div class="tabs">
  <button class="tab-btn active" onclick="showTab('checklist-tab', this)">ğŸ§³ è£å‚™</button>
  <button class="tab-btn" onclick="showTab('day1', this)">4/25</button>
  <button class="tab-btn" onclick="showTab('day2', this)">4/26</button>
  <button class="tab-btn" onclick="showTab('day3', this)">4/27</button>
  <button class="tab-btn" onclick="showTab('edit-tab', this)">â• æ–°å¢</button>
</div>

<div id="checklist-tab" class="day-content active">
  <div id="packing-list">
    <div class="check-item"><input type="checkbox"> <span>è­·ç…§ & æ©Ÿç¥¨</span></div>
    <div class="check-item"><input type="checkbox"> <span>æ¼”å”±æœƒé›»å­é–€ç¥¨ (QR Code)</span></div>
    <div class="check-item"><input type="checkbox"> <span>Candybong æ‡‰æ´æ£’ + å‚™ç”¨é›»æ± </span></div>
    <div class="check-item"><input type="checkbox"> <span>è¡Œå‹•é›»æº (é«˜å®¹é‡)</span></div>
    <div class="check-item"><input type="checkbox"> <span>æ”¶ç´è¢‹ (è£å‘¨é‚Š/æµ·å ±)</span></div>
    <div class="check-item"><input type="checkbox"> <span>æ—¥æœ¬ç¶²å¡ / VJW QR Code</span></div>
  </div>
  <div style="margin-top: 20px; display: flex; gap: 5px;">
    <input type="text" id="new-item-input" placeholder="æ‰‹å‹•æ–°å¢é …ç›®..." style="flex:1; padding:10px; border-radius:8px; border:1px solid #ccc;">
    <button onclick="addItem()" style="padding:10px 20px; background:var(--primary); color:white; border:none; border-radius:8px;">æ–°å¢</button>
  </div>
</div>

<div id="day1" class="day-content"></div>
<div id="day2" class="day-content"></div>
<div id="day3" class="day-content"></div>

<div id="edit-tab" class="day-content">
  <div class="edit-zone">
    <h3>æ–°å¢è¡Œç¨‹é …ç›®</h3>
    <select id="target-day">
      <option value="day1">4/25 (äº”) æ± è¢‹ & æ±äº¬ç«™</option>
      <option value="day2">4/26 (å…­) æ¾€è°· & æ¼”å”±æœƒ</option>
      <option value="day3">4/27 (æ—¥) æ–°å¤§ä¹…ä¿ & æ–°å®¿</option>
    </select>
    <input type="text" id="add-time" placeholder="æ™‚é–“ (ä¾‹å¦‚: 11:00)">
    <input type="text" id="add-loc" placeholder="åœ°é»åç¨±">
    <textarea id="add-memo" placeholder="å‚™è¨»ã€å‡ºå£è³‡è¨Šã€å¿…è²·æ¸…å–®"></textarea>
    <button class="add-btn" onclick="addEvent()">ç¢ºèªåŠ å…¥è¡Œç¨‹</button>
  </div>
</div>

<script>
  // é è¨­è¡Œç¨‹è³‡æ–™ï¼šæ¶µè“‹æ‰€æœ‰åº—å®¶
  const defaultEvents = {
    day1: [
      {time: "10:00", loc: "K-spot (æ±äº¬ç«™)", memo: "æ±äº¬ç«™ä¸€ç•ªè¡—ã€‚å‡ºå£ï¼šå…«é‡æ´²åœ°ä¸‹ä¸­å¤®å£ã€‚"},
      {time: "12:00", loc: "æ± è¢‹ K-BOOKS æˆ°å€", memo: "å‡ºå£ï¼šæ±å£ 35è™Ÿã€‚åŒ…å«ï¼šK-POPãƒ»J-POPé¤¨ã€å½±ç‰‡é¤¨ã€Cast Pavilionã€‚"},
      {time: "14:30", loc: "Tower Records æ± è¢‹åº—", memo: "å‡ºå£ï¼šæ±å£(åŒ—)ã€‚ä½æ–¼ P'PARCO 6Fã€‚"}
    ],
    day2: [
      {time: "10:30", loc: "æ¾€è°·è–åœ°å·¡ç¦®", memo: "å‡ºå£ï¼šB1ã€‚1. Tower Records æ¾€è°·åº— (æ——è‰¦åº—) 2. Tower Vinyl (6F)"},
      {time: "13:00", loc: "Mandarake & MAGNET", memo: "å‡ºå£ï¼šA2ã€‚æ‰¾äºŒæ‰‹ç¨€æœ‰å°å¡ã€‚"},
      {time: "17:00", loc: "ğŸŸ åœ‹ç«‹ç«¶æŠ€å ´", memo: "å‡ºå£ï¼šA2ã€‚æ¼”å”±æœƒé–‹æ¼”ï¼Candybong æº–å‚™å¥½ï¼", special: "is-concert"}
    ],
    day3: [
      {time: "10:00", loc: "æ–°å¤§ä¹…ä¿éŸ“åœ‹è¡—", memo: "å‡ºå£ï¼šå–®ä¸€å‡ºå£ã€‚åº—å®¶ï¼šSeoul Record, MOIZA, éŸ“æµãªã‚‰, Hallyu Hyakkaten, Idol Parkã€‚"},
      {time: "13:30", loc: "æ–°å®¿ Tower Records", memo: "å‡ºå£ï¼šæ±å—å£ (Flagså¤§æ¨“)ã€‚"},
      {time: "14:30", loc: "HMV&BOOKS SPOT", memo: "æ–°å®¿ LUMINE EST B1ã€‚"},
      {time: "16:00", loc: "âœˆï¸ å¾€æˆç”°æ©Ÿå ´", memo: "å¸¶è‘—æˆ°åˆ©å“æ­ä¹˜ NEXã€‚"}
    ]
  };

  let myEvents = JSON.parse(localStorage.getItem('oncePlanV8')) || defaultEvents;

  function renderEvents() {
    ['day1', 'day2', 'day3'].forEach(day => {
      const container = document.getElementById(day);
      container.innerHTML = "";
      myEvents[day].forEach((ev, index) => {
        container.innerHTML += `
          <div class="event-card ${ev.special || ''}">
            <button class="del-btn" onclick="deleteEvent('${day}', ${index})">Ã—</button>
            <div class="time-label">${ev.time}</div>
            <span class="loc-label">ğŸ“ ${ev.loc}</span>
            <span class="memo-label">${ev.memo}</span>
          </div>
        `;
      });
    });
    localStorage.setItem('oncePlanV8', JSON.stringify(myEvents));
  }

  function addEvent() {
    const day = document.getElementById('target-day').value;
    const time = document.getElementById('add-time').value;
    const loc = document.getElementById('add-loc').value;
    const memo = document.getElementById('add-memo').value;
    if(!loc) return alert("è«‹è¼¸å…¥åœ°é»");
    myEvents[day].push({time, loc, memo});
    myEvents[day].sort((a, b) => a.time.localeCompare(b.time)); // æŒ‰æ™‚é–“è‡ªå‹•æ’åº
    renderEvents();
    alert("è¡Œç¨‹å·²æ–°å¢ï¼");
  }

  function deleteEvent(day, index) {
    if(confirm("è¦åˆªé™¤æ­¤è¡Œç¨‹å—ï¼Ÿ")) {
      myEvents[day].splice(index, 1);
      renderEvents();
    }
  }

  function addItem() {
    const val = document.getElementById('new-item-input').value;
    if(!val) return;
    const div = document.createElement('div');
    div.className = "check-item";
    div.innerHTML = `<input type="checkbox"> <span>${val}</span>`;
    document.getElementById('packing-list').appendChild(div);
    document.getElementById('new-item-input').value = "";
  }

  function showTab(tabId, btn) {
    document.querySelectorAll('.day-content').forEach(d => d.classList.remove('active'));
    document.querySelectorAll('.tab-btn').forEach(b => b.classList.remove('active'));
    document.getElementById(tabId).classList.add('active');
    btn.classList.add('active');
  }

  function updateCountdown() {
    const target = new Date('2026-04-26T17:00:00+09:00');
    const now = new Date();
    const diff = target - now;
    if (diff <= 0) { document.getElementById('countdown').innerText = 'ENJOY THE SHOW! ğŸ­'; return; }
    const d = Math.floor(diff / (1000 * 60 * 60 * 24)).toString().padStart(2, '0');
    const h = Math.floor((diff / (1000 * 60 * 60)) % 24).toString().padStart(2, '0');
    const m = Math.floor((diff / 1000 / 60) % 60).toString().padStart(2, '0');
    const s = Math.floor((diff / 1000) % 60).toString().padStart(2, '0');
    document.getElementById('countdown').innerText = `${d}D ${h}:${m}:${s}`;
  }

  setInterval(updateCountdown, 1000);
  renderEvents();
</script>

</body>
</html>
